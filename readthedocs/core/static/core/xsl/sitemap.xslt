<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
  version="3.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:sitemap="http://www.sitemaps.org/schemas/sitemap/0.9"
>
  <xsl:output method="html" indent="yes" encoding="UTF-8" />
  <xsl:template match="/">
    <html>
      <head>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <style>
          main p,
          main h1,
          main h2 {
            max-width: 50rem;
          }
        </style>
      </head>
      <body>
        <main>
          <h1>Documentation sitemap</h1>

          <p>
            This sitemap is autogenerated by Read the Docs. For projects with
            subprojects, this sitemap links to the sitemap for each individual
            subproject. For projects without subprojects, this sitemap links to
            the project's public versions, sorted by version number.
          </p>

          <h2>Links</h2>

          <ul>
            <xsl:for-each select="sitemap:urlset/sitemap:url">
              <xsl:variable name="sitemap_loc"
                ><xsl:value-of select="sitemap:loc"
              /></xsl:variable>
              <xsl:variable name="sitemap_lastmod"
                ><xsl:value-of select="sitemap:lastmod"
              /></xsl:variable>
              <li>
                URL:
                <a href="{$sitemap_loc}"
                  ><xsl:value-of select="sitemap:loc"
                /></a>
                <xsl:if test="$sitemap_lastmod!=''">
                  (<xsl:value-of select="sitemap:lastmod" />)
                </xsl:if>
              </li>
            </xsl:for-each>
            <xsl:for-each select="sitemap:sitemapindex/sitemap:sitemap">
              <xsl:variable name="sitemap_loc"
                ><xsl:value-of select="sitemap:loc"
              /></xsl:variable>
              <xsl:variable name="sitemap_lastmod"
                ><xsl:value-of select="sitemap:lastmod"
              /></xsl:variable>
              <li>
                Sitemap:
                <a href="{$sitemap_loc}"
                  ><xsl:value-of select="sitemap:loc"
                /></a>
                <xsl:if test="$sitemap_lastmod!=''">
                  (<xsl:value-of select="sitemap:lastmod" />)
                </xsl:if>
              </li>
            </xsl:for-each>
          </ul>

          <h2>Learn more</h2>

          <dl>
            <dt>
              <a
                href="https://docs.readthedocs.com/platform/stable/reference/sitemaps.html"
                >Sitemap documentation</a
              >
            </dt>
            <dd>
              How sitemaps are generated and how to use and customize them for
              your projects.
            </dd>
            <dt>
              <a
                href="https://docs.readthedocs.com/platform/stable/guides/technical-docs-seo-guide.html"
                >Our guide about SEO techniques</a
              >
            </dt>
            <dd>
              How sitemaps affect SEO and best practices to indexing your
              documentation content.
            </dd>
          </dl>
        </main>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet>
